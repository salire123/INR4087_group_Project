2025-03-18 15:04:09,246 - app - INFO - Flask app started
2025-03-18 15:04:10,071 - app - INFO - History retrieval request from IP: 127.0.0.1
2025-03-18 15:04:10,072 - app - INFO - Successfully retrieved history for user: testuser from IP: 127.0.0.1
2025-03-18 15:04:10,081 - app - INFO - History retrieval request from IP: 127.0.0.1
2025-03-18 15:04:10,081 - app - INFO - User not found: nonexistent - request from IP: 127.0.0.1
2025-03-18 15:04:10,090 - app - INFO - History retrieval request from IP: 127.0.0.1
2025-03-18 15:04:10,090 - app - INFO - No history found for user_id: 1 from IP: 127.0.0.1
2025-03-18 15:04:10,098 - app - INFO - Add read history request from IP: 127.0.0.1
2025-03-18 15:04:14,177 - app - ERROR - Read history error from IP 127.0.0.1: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.
Traceback (most recent call last):
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 357, in connect
    sock = self.retry.call_with_retry(
        lambda: self._connect(), lambda error: self.disconnect(error)
    )
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\retry.py", line 62, in call_with_retry
    return do()
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 358, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ~~~~~~~~~~~~~^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 730, in _connect
    raise err
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 718, in _connect
    sock.connect(socket_address)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\main\homework\int4087\project\backend\src\routes\history.py", line 117, in add_read_history
    redis_client.incr(read_key)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\commands\core.py", line 1946, in incrby
    return self.execute_command("INCRBY", name, amount)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\client.py", line 559, in execute_command
    return self._execute_command(*args, **options)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\client.py", line 565, in _execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 1422, in get_connection
    connection.connect()
    ~~~~~~~~~~~~~~~~~~^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 363, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.

2025-03-18 15:04:14,326 - app - INFO - Add read history request from IP: 127.0.0.1
2025-03-18 15:04:18,417 - app - ERROR - Read history error from IP 127.0.0.1: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.
Traceback (most recent call last):
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 357, in connect
    sock = self.retry.call_with_retry(
        lambda: self._connect(), lambda error: self.disconnect(error)
    )
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\retry.py", line 62, in call_with_retry
    return do()
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 358, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            ~~~~~~~~~~~~~^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 730, in _connect
    raise err
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 718, in _connect
    sock.connect(socket_address)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^
ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "F:\main\homework\int4087\project\backend\src\routes\history.py", line 117, in add_read_history
    redis_client.incr(read_key)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\commands\core.py", line 1946, in incrby
    return self.execute_command("INCRBY", name, amount)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\client.py", line 559, in execute_command
    return self._execute_command(*args, **options)
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\client.py", line 565, in _execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
                              ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 1422, in get_connection
    connection.connect()
    ~~~~~~~~~~~~~~~~~~^^
  File "F:\main\homework\int4087\project\.backend_venv\Lib\site-packages\redis\connection.py", line 363, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379. No connection could be made because the target machine actively refused it.

2025-03-18 15:04:18,428 - app - INFO - Add like request from IP: 127.0.0.1
2025-03-18 15:04:18,429 - app - INFO - Like added for post 6075b7b2d51c5b5e6c3a9abc by user: testuser from IP: 127.0.0.1
2025-03-18 15:04:18,432 - app - INFO - Add like request from IP: 127.0.0.1
2025-03-18 15:04:18,433 - app - INFO - Post 6075b7b2d51c5b5e6c3a9abc already liked by user: testuser - request from IP: 127.0.0.1
2025-03-18 15:04:18,437 - app - INFO - Remove like request from IP: 127.0.0.1
2025-03-18 15:04:18,437 - app - INFO - Like removed for post 6075b7b2d51c5b5e6c3a9abc by user: testuser from IP: 127.0.0.1
2025-03-18 15:04:18,441 - app - INFO - Remove like request from IP: 127.0.0.1
2025-03-18 15:04:18,441 - app - INFO - Post 6075b7b2d51c5b5e6c3a9abc not liked by user: testuser - request from IP: 127.0.0.1
2025-03-18 15:04:18,444 - app - INFO - Add read history request from IP: 127.0.0.1
2025-03-18 15:04:18,444 - app - WARNING - Token missing for add_read_history request from IP: 127.0.0.1
2025-03-18 15:04:18,444 - app - INFO - Add like request from IP: 127.0.0.1
2025-03-18 15:04:18,445 - app - WARNING - Token missing for add_like request from IP: 127.0.0.1
2025-03-18 15:04:18,446 - app - INFO - Remove like request from IP: 127.0.0.1
2025-03-18 15:04:18,446 - app - WARNING - Token missing for remove_like request from IP: 127.0.0.1
2025-03-18 15:04:18,448 - app - INFO - Add read history request from IP: 127.0.0.1
2025-03-18 15:04:18,448 - app - WARNING - Invalid token provided from IP: 127.0.0.1
2025-03-18 15:04:18,449 - app - INFO - Add like request from IP: 127.0.0.1
2025-03-18 15:04:18,449 - app - WARNING - Invalid token provided from IP: 127.0.0.1
2025-03-18 15:04:18,453 - app - INFO - Remove like request from IP: 127.0.0.1
2025-03-18 15:04:18,453 - app - WARNING - Invalid token provided from IP: 127.0.0.1
